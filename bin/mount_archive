#! /usr/bin/env ruby

$: << File.expand_path('../../lib', __FILE__)

require 'dante'
require 'mount_archive'

if ARGV.count < 1
  puts 'USAGE: mount_archive <archive_name>'
  exit(1)
end

archive_name = ARGV.shift

Dante::Runner.new("mount_archive_#{archive_name}").execute({
  :daemonize => true,
  :pid_path  => "/tmp/mount_archive_#{archive_name}.pid"
}) do
  MountArchive.mount archive_name
end
