#! /usr/bin/env ruby

require 'dante'
require 'fileutils'

if ARGV.count < 1 or not File.directory? ARGV[0]
  puts 'USAGE: umount_archive <directory_name>'
  exit(1)
end

dir_name     = ARGV.shift
archive_name = dir_name.chomp('.d')

Dante::Runner.new("mount_archive_#{archive_name}").execute({
  :kill     => true,
  :pid_path => "/tmp/mount_archive_#{archive_name}.pid"
})
